{"version":3,"sources":["Canvas.js","LoginScreen.js","NextButton.js","PrevButton.js","AlbumSelect.js","Slider.js","ToggleButton.js","Settings.js","ViewerScreen.js","App.js","serviceWorker.js","index.js"],"names":["crypto","require","options","MyCanvas","props","componentDidUpdate","prevProps","url","setImage","canvas","document","getElementById","width","window","innerWidth","height","innerHeight","ctx","getContext","fillStyle","fillRect","a","console","log","axios","method","responseType","headers","listResult","encryptedData","Buffer","data","decryptedData","password","cryptKey","createHash","update","String","digest","substr","iv","alloc","cipher","createDecipheriv","from","concat","final","image","Image","onload","showImage","onerror","src","type","toString","error","wrh","newWidth","newHeight","x","y","drawImage","this","id","React","Component","Login","setSite","event","setState","site","target","value","setName","name","setPassword","validateForm","state","email","length","handleSubmit","preventDefault","updateCredentials","history","push","process","className","onSubmit","onChange","NextButton","onClick","handleOnNext","PrevButton","handleOnPrev","AlbumSelect","albums","map","album","key","selectedAlbum","handleChange","Slider","min","max","current","ToggleButton","handleOnToggle","host","user","settingUrl","config","httpsProxy","settingValue","settingResult","undefined","Viewer","handleAlbumChange","newActiveAlbum","Settings","saveSetting","username","loadImageList","imageList","showNewImage","handleSliderChange","activeAlbum","handleResize","activeImageIndex","index","imageUrl","baseUrl","newType","newImagePassword","endsWith","activeUrl","imageType","imageListLength","imagePassword","e","loadAlbumList","albumListUrl","albumResult","albumName","albumUrl","list","onNext","newActiveImageIndex","onPrev","onKey","which","keyCode","closeFullscreen","isInFullScreen","button","onRightClick","onWheel","deltaY","onShow","classList","remove","add","timeout","clearTimeout","setTimeout","onHide","handleFullscreenToggle","openFullscreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","docElm","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","albumList","fullScreen","newAlbumList","loadSetting","newState","addEventListener","removeEventListener","Canvas","App","path","render","ViewerScreen","component","LoginScreen","Boolean","location","hostname","match","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"+MAIMA,G,OAASC,EAAQ,MACjBC,EAAuB,SAEvBC,E,YAMF,WAAYC,GAAQ,IAAD,8BACf,4CAAMA,KAGVC,mBAAqB,SAACC,GAIlB,GAAuB,KAAnB,EAAKF,MAAMG,IACX,EAAKC,SAAS,EAAKJ,MAAMG,SACtB,CAEH,IAAIE,EAASC,SAASC,eAAe,YACrCF,EAAOG,MAAQC,OAAOC,WACtBL,EAAOM,OAASF,OAAOG,YAEvB,IAAIC,EAAMR,EAAOS,WAAW,MAC5BD,EAAIE,UAAY,OAChBF,EAAIG,SAAS,EAAE,EAAEX,EAAOG,MAAMH,EAAOM,UAlB1B,EA0BnBP,SA1BmB,sBA0BR,wCAAAa,EAAA,yDAEgB,KAAnB,EAAKjB,MAAMG,IAFR,uBAGHe,QAAQC,IAAR,yCAHG,iCAMPD,QAAQC,IAAR,uCAA4C,EAAKnB,MAAMG,MANhD,kBASoBiB,IAAM,CACzBC,OAAQ,MACRlB,IAAK,EAAKH,MAAMG,IAChBmB,aAAc,OACdC,QAAS,CAAE,8BAA+B,OAb3C,OASCC,EATD,OAkBCC,EAAgB,IAAIC,EAAOF,EAAWG,KAAM,UAC5CC,EAAgB,KAEQ,KAAxB,EAAK5B,MAAM6B,UACLC,EAAWlC,EAAOmC,WAAW,UAAUC,OAAOC,OAAO,EAAKjC,MAAM6B,WAAWK,OAAO,UAAUC,OAAO,EAAG,IACtGC,EAAKV,EAAOW,MAAM,GAAI,GACxBC,EAAS1C,EAAO2C,iBAAiBzC,EAAmBgC,EAAUM,GAElER,EAAgBF,EAAOc,KAAKF,EAAON,OAAOP,GAAgB,UAC1DG,EAAgBF,EAAOe,OAAO,CAACb,EAAeU,EAAOI,YAErDxB,QAAQC,IAAR,kDACAS,EAAgBH,IAGhBkB,EAAQ,IAAIC,OAEVC,OAAS,WACX,EAAKC,UAAUH,IAGnBA,EAAMI,QAAU,WAEZ,IAAI1C,EAASC,SAASC,eAAe,YACrCF,EAAOG,MAAQC,OAAOC,WACtBL,EAAOM,OAASF,OAAOG,YAEvB,IAAIC,EAAMR,EAAOS,WAAW,MAC5BD,EAAIE,UAAY,OAChBF,EAAIG,SAAS,EAAE,EAAEX,EAAOG,MAAMH,EAAOM,SAGzCgC,EAAMK,IAAM,cAAgB,EAAKhD,MAAMiD,KAAO,WAAa,IAAIvB,EAAOE,GAAesB,SAAS,UAlD3F,kDAoDHhC,QAAQiC,MAAR,+CApDG,0DA1BQ,EAkFnBL,UAAY,SAACH,GACT,IAAItC,EAASC,SAASC,eAAe,YACrCF,EAAOG,MAAQC,OAAOC,WACtBL,EAAOM,OAASF,OAAOG,YAEvB,IAAIC,EAAMR,EAAOS,WAAW,MAExBsC,EAAMT,EAAMnC,MAAQmC,EAAMhC,OAC1B0C,EAAWhD,EAAOG,MAClB8C,EAAYD,EAAWD,EACvBE,EAAYjD,EAAOM,SAEnB0C,GADAC,EAAYjD,EAAOM,QACIyC,GAG3B,IAAIG,EAAI,EACJC,EAAI,EAEJH,EAAWhD,EAAOG,QAClB+C,GAAKlD,EAAOG,MAAQ6C,GAAY,GAGhCC,EAAYjD,EAAOM,SACnB6C,GAAKnD,EAAOM,OAAS2C,GAAa,GAItCzC,EAAIG,SAAS,EAAG,EAAGX,EAAOG,MAAOH,EAAOM,QACxCE,EAAI4C,UAAUd,EAAOY,EAAGC,EAAGH,EAAUC,IA9GtB,E,iFAuBfI,KAAKtD,a,+BA2FL,OAAQ,4BAAQuD,GAAG,iB,GAxHJC,IAAMC,WA4Hd9D,Q,4VC3DA+D,E,YApEX,WAAY9D,GAAQ,IAAD,8BACf,4CAAMA,KAQV+D,QAAU,SAACC,GACP,EAAKC,SAAS,CAAEC,KAAMF,EAAMG,OAAOC,SAVpB,EAanBC,QAAU,SAACL,GACP,EAAKC,SAAS,CAAEK,KAAMN,EAAMG,OAAOC,SAdpB,EAiBnBG,YAAc,SAACP,GACX,EAAKC,SAAS,CAAEpC,SAAUmC,EAAMG,OAAOC,SAlBxB,EAqBnBI,aAAe,WACX,OAAO,EAAKC,MAAMC,MAAMC,OAAS,GAAK,EAAKF,MAAM5C,SAAS8C,OAAS,GAtBpD,EAyBnBC,aAAe,SAACZ,GAEZA,EAAMa,iBACN,EAAK7E,MAAM8E,kBAAkB,EAAKL,MAAMP,KAAM,EAAKO,MAAMH,KAAM,EAAKG,MAAM5C,UAC1E,EAAK7B,MAAM+E,QAAQC,KAAKC,kBA3BxB,EAAKR,MAAQ,CACTP,KAAM,GACNI,KAAM,GACNzC,SAAU,IALC,E,sEAiCf,OACI,0BAAMqD,UAAU,kBAAkBC,SAAUzB,KAAKkB,cAC7C,yBAAKM,UAAU,cACX,2BAAOA,UAAU,0BAAjB,SACA,yBAAKA,UAAU,aACX,2BAAOA,UAAU,eAAevB,GAAG,OAC/BS,MAAOV,KAAKe,MAAMP,KAAMkB,SAAU1B,KAAKK,YAGnD,yBAAKmB,UAAU,cACX,2BAAOA,UAAU,0BAAjB,SACA,yBAAKA,UAAU,aACX,2BAAOA,UAAU,eAAevB,GAAG,OAC/BS,MAAOV,KAAKe,MAAMH,KAAMc,SAAU1B,KAAKW,YAGnD,yBAAKa,UAAU,cACX,2BAAOA,UAAU,0BAAjB,aACA,yBAAKA,UAAU,aACX,2BAAOjC,KAAK,WAAWiC,UAAU,eAAevB,GAAG,MAC/CS,MAAOV,KAAKe,MAAM5C,SAAUuD,SAAU1B,KAAKa,gBAGvD,yBAAKW,UAAU,cACX,yBAAKA,UAAU,6BACX,4BAAQjC,KAAK,SAASiC,UAAU,mBAAhC,iB,GA5DJtB,IAAMC,W,4DCaXwB,E,iLAXP,OACI,4BACI1B,GAAG,aACHuB,UAAU,4CACVI,QAAS5B,KAAK1D,MAAMuF,cAHxB,S,GAHa3B,IAAMC,WCahB2B,E,iLAXT,OACE,4BACI7B,GAAG,aACHuB,UAAU,4CACVI,QAAS5B,KAAK1D,MAAMyF,cAHxB,S,GAHiB7B,IAAMC,WCoBhB6B,E,iLAhBP,IAAM5F,EAAU4D,KAAK1D,MAAM2F,OAAOC,KAAI,SAACC,GAAD,OAClC,4BAAQC,IAAKD,EAAOzB,MAAOyB,GAASA,MAGxC,OACI,4BACElC,GAAG,cACHuB,UAAU,eACVd,MAAOV,KAAK1D,MAAM+F,cAClBX,SAAU1B,KAAK1D,MAAMgG,cAClBlG,O,GAdS8D,IAAMC,WCmBjBoC,E,iLAfP,OACI,yBAAKtC,GAAG,cAAcuB,UAAU,kBAC5B,2BACIA,UAAU,SACVvB,GAAG,UACHV,KAAK,QACLiD,IAAI,IACJC,IAAKzC,KAAK1D,MAAMmG,IAChB/B,MAAOV,KAAK1D,MAAMoG,QAClBhB,SAAU1B,KAAK1D,MAAMgG,oB,GAZpBpC,IAAMC,WCYZwC,E,iLAXP,OACI,4BACI1C,GAAG,eACHuB,UAAU,sCACVI,QAAS5B,KAAK1D,MAAMsG,gBAHxB,a,GAHe1C,IAAMC,W,4JCEJ0C,EAAMC,EAAMV,G,kFAC7BW,E,UAAgBC,EAAOC,W,kBAAoBJ,E,qBAAiBC,E,wBAAoBV,GACpF5E,QAAQC,IAAR,uBAA4BsF,IAExBG,EAAe,G,kBAIWxF,IAAM,CAC5BC,OAAQ,MACRlB,IAAKsG,EACLnF,aAAc,OACdC,QAAS,CAAE,8BAA+B,O,OAJ1CsF,E,OAOJD,EAAeC,EAAclF,K,kDAE7BT,QAAQC,IAAR,iCAAsC2E,IACtCc,EAAe,G,oBAGSE,WAAjBF,GAA+C,cAAjBA,IACrC1F,QAAQC,IAAR,gDAAqDqF,EAArD,qBAAsEV,EAAtE,iCACAc,EAAe,IAGnB1F,QAAQC,IAAR,2CAAgD2E,EAAhD,aAAwDc,I,kBACjDA,G,gMAIeL,EAAMC,EAAMV,EAAK1B,G,uEACnCqC,E,UAAgBC,EAAOC,W,kBAAoBJ,E,qBAAiBC,E,wBAAoBV,E,kBAAa1B,GACjGlD,QAAQC,IAAR,uBAA4BsF,IAE5B,IACIrF,IAAM,CACFC,OAAQ,OACRlB,IAAKsG,EACLnF,aAAc,OACdC,QAAS,CAAE,8BAA+B,OAEhD,MAAO4B,GACLjC,QAAQC,IAAR,sCAA2CgC,I,+GCwWxC4D,E,YApXX,WAAY/G,GAAQ,IAAD,8BACf,4CAAMA,KAsBVgH,kBAvBmB,uCAuBC,WAAOhD,GAAP,eAAA/C,EAAA,6DACZgG,EAAiBjD,EAAMG,OAAOC,MAClClD,QAAQC,IAAR,sBAAmC8F,GAEnCC,EAASC,YAAY,EAAKnH,MAAMkE,KAAM,EAAKlE,MAAMoH,SAAU,YAAaH,GAJxD,SAMO,EAAKI,cAAcJ,GAN1B,OAMhB,EAAKK,UANW,OAchB,EAAKC,aAAaN,EAAgB,GAdlB,2CAvBD,wDAwCnBO,mBAAqB,SAACxD,GAElB,EAAKuD,aAAa,EAAK9C,MAAMgD,YAAazD,EAAMG,OAAOC,QA1CxC,EA6CnBsD,aAAe,WAEX,EAAKH,aAAa,EAAK9C,MAAMgD,YAAa,EAAKhD,MAAMkD,mBA/CtC,EAkDnBJ,aAAe,SAAC1B,EAAO+B,GAEnBV,EAASC,YAAY,EAAKnH,MAAMkE,KAAM,EAAKlE,MAAMoH,SAAU,YAAaQ,GAExE,IAAIC,EAAQ,UAAM,EAAKpD,MAAMqD,QAAjB,kCAAkDjC,EAAlD,sBAAqE,EAAKyB,UAAUM,IAE5FG,EAAU,GACVC,EAAmB,EAAKvD,MAAM5C,SAClC,IACI,EAAKyF,UAAUM,GAAOK,SAAS,OAC/BF,EAAU,OACH,EAAKT,UAAUM,GAAOK,SAAS,OACtCF,EAAU,MACH,EAAKT,UAAUM,GAAOK,SAAS,OACtCF,EAAU,MACH,EAAKT,UAAUM,GAAOK,SAAS,SAG/B,EAAKX,UAAUM,GAAOK,SAAS,QAFtCF,EAAU,OACVC,EAAmB,IAIZ,EAAKV,UAAUM,GAAOK,SAAS,QACtCF,EAAU,MACVC,EAAmB,IACZ,EAAKV,UAAUM,GAAOK,SAAS,SACtCF,EAAU,MACVC,EAAmB,IAGvB,EAAK/D,SAAS,CACViE,UAAWL,EACXM,UAAWJ,EACXN,YAAa5B,EACbuC,gBAAiB,EAAKd,UAAU3C,OAChCgD,iBAAkBC,EAClBS,cAAeL,IACjB,MAAOM,GACLpH,QAAQC,IAAR,wCAA6CmH,MAvFlC,EAmJnBC,cAnJmB,sBAmJH,8BAAAtH,EAAA,6DACRuH,EAAe,EAAK/D,MAAMqD,QAAU,UAD5B,SAKY1G,IAAM,CAC1BC,OAAQ,MACRlB,IAAKqI,EACLlH,aAAc,OACdC,QAAS,CAAE,8BAA+B,OATlC,cAKRkH,EALQ,yBAYLA,EAAY9G,MAZP,2CAnJG,EAkKnB0F,cAlKmB,uCAkKH,WAAOqB,GAAP,mBAAAzH,EAAA,6DACR0H,EAAW,EAAKlE,MAAMqD,QAAU,oBAAsBY,EAGtDE,EAAO,GAJC,kBAMexH,IAAM,CACzBC,OAAQ,MACRlB,IAAKwI,EACLrH,aAAc,OACdC,QAAS,CAAE,8BAA+B,OAVtC,OAMJC,EANI,OAYRoH,EAAOpH,EAAWG,KAZV,gDAcRT,QAAQC,IAAR,+CAdQ,iCAiBLyH,GAjBK,yDAlKG,wDAsLnBC,OAAS,WAGL,GAFA3H,QAAQC,IAAI,uBAAyB,EAAKsD,MAAMkD,kBAE5C,EAAKlD,MAAMkD,iBAAmB,EAAKlD,MAAM2D,gBAAkB,EAAG,CAC9D,IAAIU,EAAsB,EAAKrE,MAAMkD,iBAErCmB,IAEA,EAAKvB,aAAa,EAAK9C,MAAMgD,YAAaqB,KA9L/B,EAkMnBC,OAAS,WAGL,GAFA7H,QAAQC,IAAI,uBAAyB,EAAKsD,MAAMkD,kBAE5C,EAAKlD,MAAMkD,iBAAmB,EAAG,CACjC,IAAImB,EAAsB,EAAKrE,MAAMkD,iBAAmB,EACxDmB,IAEA,EAAKvB,aAAa,EAAK9C,MAAMgD,YAAaqB,KAzM/B,EA6MnBE,MAAQ,SAAChF,GACL,IAAIT,EAAIS,EAAMiF,OAASjF,EAAMkF,QAMnB,KAAN3F,GAAkB,KAANA,EACZ,EAAKsF,SACQ,KAANtF,EACP,EAAKwF,SACQ,KAANxF,GACP,EAAK4F,mBAzNM,EA6NnB7D,QAAU,SAACtB,GACP9C,QAAQC,IAAI,YACR,EAAKiI,kBACLlI,QAAQC,IAAI,kBAAmB6C,EAAMqF,QAChB,IAAjBrF,EAAMqF,OACN,EAAKN,SACmB,IAAjB/E,EAAMqF,OACb,EAAKrJ,MAAM+E,QAAQC,KAAKC,WACA,IAAjBjB,EAAMqF,QACb,EAAKR,UAGT3H,QAAQC,IAAI,iDAzOD,EA6OnBmI,aAAe,SAACtF,GAEZA,EAAMa,kBA/OS,EAkPnB0E,QAAU,SAACvF,GACP9C,QAAQC,IAAI,oBAAqB6C,GAE7BA,EAAMwF,OAAS,EACf,EAAKT,SACE/E,EAAMwF,OAAS,EACtB,EAAKX,SAEL3H,QAAQC,IAAI,qCA1PD,EA8PnBsI,OAAS,WACL,IACS,EAAKL,kBAaN9I,SAASC,eAAe,eAAemJ,UAAUC,OAAO,aACxDrJ,SAASC,eAAe,eAAemJ,UAAUE,IAAI,cAbrDtJ,SAASC,eAAe,cAAcmJ,UAAUC,OAAO,aACvDrJ,SAASC,eAAe,cAAcmJ,UAAUC,OAAO,aACvDrJ,SAASC,eAAe,eAAemJ,UAAUC,OAAO,aACxDrJ,SAASC,eAAe,eAAemJ,UAAUC,OAAO,aACxDrJ,SAASC,eAAe,gBAAgBmJ,UAAUC,OAAO,aACzDrJ,SAASC,eAAe,cAAcmJ,UAAUE,IAAI,YACpDtJ,SAASC,eAAe,cAAcmJ,UAAUE,IAAI,YACpDtJ,SAASC,eAAe,eAAemJ,UAAUE,IAAI,YACrDtJ,SAASC,eAAe,eAAemJ,UAAUE,IAAI,YACrDtJ,SAASC,eAAe,gBAAgBmJ,UAAUE,IAAI,kBASrC9C,IAAjB,EAAK+C,SACLC,aAAa,EAAKD,SAGtB,EAAKA,QAAUE,YAAW,WACtB,EAAKC,WACN,KACL,MAAO1B,MA1RM,EA6RnB0B,OAAS,WACL,IACI1J,SAASC,eAAe,cAAcmJ,UAAUC,OAAO,YACvDrJ,SAASC,eAAe,cAAcmJ,UAAUC,OAAO,YACvDrJ,SAASC,eAAe,eAAemJ,UAAUC,OAAO,YACxDrJ,SAASC,eAAe,eAAemJ,UAAUC,OAAO,YACxDrJ,SAASC,eAAe,gBAAgBmJ,UAAUC,OAAO,YACzDrJ,SAASC,eAAe,cAAcmJ,UAAUE,IAAI,aACpDtJ,SAASC,eAAe,cAAcmJ,UAAUE,IAAI,aACpDtJ,SAASC,eAAe,eAAemJ,UAAUE,IAAI,aACrDtJ,SAASC,eAAe,eAAemJ,UAAUE,IAAI,aACrDtJ,SAASC,eAAe,gBAAgBmJ,UAAUE,IAAI,aACxD,MAAOtB,MAzSM,EA4SnB2B,uBAAyB,WACjB,EAAKb,iBACL,EAAKD,kBAEL,EAAKe,kBAhTM,EAoTnBd,eAAiB,WACb,OAAQ9I,SAAS6J,mBAAoD,OAA/B7J,SAAS6J,mBAC1C7J,SAAS8J,yBAAgE,OAArC9J,SAAS8J,yBAC7C9J,SAAS+J,sBAA0D,OAAlC/J,SAAS+J,sBAC1C/J,SAASgK,qBAAwD,OAAjChK,SAASgK,qBAxT/B,EA2TnBJ,eAAiB,WAEb,IAAIK,EAASjK,SAASkK,gBAElBD,EAAOE,kBACPF,EAAOE,oBACAF,EAAOG,qBACdH,EAAOG,uBACAH,EAAOI,wBACdJ,EAAOI,0BACAJ,EAAOK,qBACdL,EAAOK,uBAtUI,EA2UnBzB,gBAAkB,WAEV7I,SAASuK,eACTvK,SAASuK,iBACFvK,SAASwK,qBAChBxK,SAASwK,uBACFxK,SAASyK,oBAChBzK,SAASyK,sBACFzK,SAAS0K,kBAChB1K,SAAS0K,oBAlVb,EAAKvG,MAAQ,CACTqD,QAAQ,GAAD,OAAKpB,EAAOC,WAAZ,kBAAgC,EAAK3G,MAAMkE,KAA3C,qBAA4D,EAAKlE,MAAMoH,UAC9EvF,SAAU,EAAK7B,MAAM6B,SACrBqG,UAAW,GACX+C,UAAW,CAAC,OACZxD,YAAa,GACbE,iBAAkB,EAClBS,gBAAiB,EACjBD,UAAW,GACXE,cAAe,EAAKrI,MAAM6B,UAIF,KAAxB,EAAK7B,MAAMoH,WACXlG,QAAQC,IAAR,kCACA,EAAKnB,MAAM+E,QAAQC,KAAKC,YAE5B,EAAKqC,UAAY,GACjB,EAAK4D,YAAa,EApBH,E,qNA4FfxH,KAAKmG,QAAUE,YAAW,WACtB,EAAKC,WACN,K,kBAI0BtG,KAAK6E,gB,cAA1B4C,E,gBAEuBjE,EAASkE,YAAY1H,KAAK1D,MAAMkE,KAAMR,KAAK1D,MAAMoH,SAAU,a,aAC/D,MADnBH,E,UAEAA,EAAiBkE,EAAa,GAC9BjE,EAASC,YAAYzD,KAAK1D,MAAMkE,KAAMR,KAAK1D,MAAMoH,SAAU,YAAaH,I,UAErDvD,KAAK2D,cAAcJ,G,eAA1CvD,KAAK4D,U,iBAE2BJ,EAASkE,YAAY1H,KAAK1D,MAAMkE,KAAMR,KAAK1D,MAAMoH,SAAU,a,QAC/D,MADxB0B,E,UAEA5H,QAAQC,IAAR,sEACA2H,EAAsB,GAG1BpF,KAAK6D,aAAaN,EAAgB6B,GAE9BuC,EAAW,CACXJ,UAAWE,GAGfzH,KAAKO,SAASoH,G,kDAIdnK,QAAQC,IAAR,8EACqB2F,IAAjBpD,KAAKmG,SACLC,aAAapG,KAAKmG,SAEtBnG,KAAK1D,MAAM+E,QAAQC,KAAKC,W,QAG5B3E,SAASgL,iBAAiB,UAAW5H,KAAKsF,OAC1C1I,SAASgL,iBAAiB,QAAS5H,KAAK6F,SACxCjJ,SAASgL,iBAAiB,YAAa5H,KAAK+F,QAC5CnJ,SAASgL,iBAAiB,YAAa5H,KAAK4B,SAC5ChF,SAASgL,iBAAiB,cAAe5H,KAAK4F,cAC9C7I,OAAO6K,iBAAiB,SAAU5H,KAAKgE,c,6JAIvCpH,SAASiL,oBAAoB,UAAW7H,KAAKsF,OAC7C1I,SAASiL,oBAAoB,QAAS7H,KAAK6F,SAC3CjJ,SAASiL,oBAAoB,YAAa7H,KAAK+F,QAC/CnJ,SAASiL,oBAAoB,YAAa7H,KAAK4B,SAC/ChF,SAASiL,oBAAoB,cAAe7H,KAAK4F,cACjDhJ,SAASiL,oBAAoB,SAAU7H,KAAKgE,gB,+BA8M5C,OACI,yBAAK/D,GAAG,WAAWuB,UAAU,UACzB,kBAAC,EAAD,CACIa,cAAerC,KAAKe,MAAMgD,YAC1BzB,aAActC,KAAKsD,kBACnBrB,OAAQjC,KAAKe,MAAMwG,YAGvB,kBAACO,EAAA,EAAD,CAAQrL,IAAKuD,KAAKe,MAAMyD,UAAWrG,SAAU6B,KAAKe,MAAM4D,cAAepF,KAAMS,KAAKe,MAAM0D,YAExF,kBAAC,EAAD,CAAY5C,aAAc7B,KAAKmF,SAE/B,kBAAC,EAAD,CAAYpD,aAAc/B,KAAKqF,SAE/B,kBAAC,EAAD,CAAQ5C,IAAKzC,KAAKe,MAAM2D,gBAAkB,EAAGhC,QAAS1C,KAAKe,MAAMkD,iBAAkB3B,aAActC,KAAK8D,qBAEtG,kBAAC,EAAD,CAAclB,eAAgB5C,KAAKuG,8B,GAtX9BrG,IAAMC,WCoCZ4H,E,YAnDX,WAAYzL,GAAQ,IAAD,8BACf,4CAAMA,KAQV8E,kBAAoB,SAACZ,EAAMkD,EAAUvF,GACjCX,QAAQC,IAAR,yCAA8C+C,EAA9C,wBAAkEkD,EAAlE,wBAA0FvF,IAC1F,EAAKoC,SAAS,CAACC,KAAMA,EAAMkD,SAAUA,EAAUvF,SAAUA,KATzD,EAAK4C,MAAQ,CACTP,KAAM,GACNkD,SAAU,GACVvF,SAAU,IALC,E,sEAqBT,IAAD,OAEL,OADAX,QAAQC,IAAR,mCAAwC8D,WAEpC,kBAAC,IAAD,KACI,6BAEI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOyG,KAAMzG,gBACT0G,OAAQ,SAAC3L,GAAD,OACJ,kBAAC4L,EAAD,iBAAkB5L,EAAlB,CACAkE,KAAM,EAAKO,MAAMP,KACjBkD,SAAU,EAAK3C,MAAM2C,SACrBvF,SAAU,EAAK4C,MAAM5C,SACrBgK,UAAWD,QAGnB,kBAAC,IAAD,CAAOF,KAAMzG,UAET0G,OAAQ,SAAC3L,GAAD,OACJ,kBAAC8L,EAAD,iBAAiB9L,EAAjB,CACA8E,kBAAmB,EAAKA,+B,GA3CtClB,IAAMC,WCEJkI,QACW,cAA7BtL,OAAOuL,SAASC,UAEe,UAA7BxL,OAAOuL,SAASC,UAEhBxL,OAAOuL,SAASC,SAASC,MACvB,2DCZNC,IAASR,OAAQ,kBAAE,EAAF,MAAYrL,SAASC,eAAe,SD6H/C,kBAAmB6L,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAvJ,GACLjC,QAAQiC,MAAMA,EAAMwJ,a","file":"static/js/main.4aa7dd45.chunk.js","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './Canvas.css';\r\n\r\nconst crypto = require('crypto');\r\nconst options = { algorithm: 'aes256' };\r\n\r\nclass MyCanvas extends React.Component {\r\n    // Important props:\r\n    // url - full path\r\n    // type - jpeg, png, gif\r\n    // password - Crypt password (optional)\r\n    // eslint-disable-next-line no-useless-constructor\r\n    constructor(props) {\r\n        super(props); // url = full url to image \r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        // if (prevProps. !== this.props.text) {\r\n        //console.log(\"Canvas - componentDidUpdate: \" + this.props.url);\r\n        // }\r\n        if (this.props.url !== \"\") {\r\n            this.setImage(this.props.url);\r\n        } else {\r\n            //console.log(`Canvas - Blank URL, skipping.`);\r\n            let canvas = document.getElementById(\"myCanvas\");\r\n            canvas.width = window.innerWidth;\r\n            canvas.height = window.innerHeight;\r\n\r\n            let ctx = canvas.getContext(\"2d\");\r\n            ctx.fillStyle = \"grey\";\r\n            ctx.fillRect(0,0,canvas.width,canvas.height);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setImage();\r\n    }\r\n\r\n    setImage = async () => {\r\n        \r\n        if (this.props.url === \"\") {\r\n            console.log(`Canvas::setImage Blank url, Skipping.`);\r\n            return;\r\n        }\r\n        console.log(`Canvas::setImage Retreiving: ${this.props.url}`);\r\n        \r\n        try {\r\n            let listResult = await axios({\r\n                method: 'get',\r\n                url: this.props.url,\r\n                responseType: 'text',\r\n                headers: { 'Access-Control-Allow-Origin': '*' }\r\n            });\r\n\r\n            //console.log(listResult.data);\r\n\r\n            let encryptedData = new Buffer(listResult.data, 'base64');\r\n            let decryptedData = null;\r\n\r\n            if (this.props.password !== \"\") {\r\n                const cryptKey = crypto.createHash('sha256').update(String(this.props.password)).digest('base64').substr(0, 32); // 32 bytes\r\n                const iv = Buffer.alloc(16, 0); \r\n                var cipher = crypto.createDecipheriv(options.algorithm, cryptKey, iv);\r\n            \r\n                decryptedData = Buffer.from(cipher.update(encryptedData), 'binary');\r\n                decryptedData = Buffer.concat([decryptedData, cipher.final()]);\r\n            } else {\r\n                console.log(`Canvas::setImage: No key, Skipping decryption.`)\r\n                decryptedData = encryptedData\r\n            }\r\n\r\n            let image = new Image();\r\n            \r\n            image.onload = () => {\r\n                this.showImage(image);\r\n            } \r\n\r\n            image.onerror = () => {\r\n                //console.log(`Canvas - onerror()`);\r\n                let canvas = document.getElementById(\"myCanvas\");\r\n                canvas.width = window.innerWidth;\r\n                canvas.height = window.innerHeight;\r\n    \r\n                let ctx = canvas.getContext(\"2d\");\r\n                ctx.fillStyle = \"grey\";\r\n                ctx.fillRect(0,0,canvas.width,canvas.height);\r\n            }    \r\n            \r\n            image.src = \"data:image/\" + this.props.type + \";base64,\" + new Buffer(decryptedData).toString('base64');\r\n        } catch(error) {\r\n            console.error(`Viewer::loadImageList failed: ${error}`);\r\n        }\r\n    }\r\n\r\n    showImage = (image) => {\r\n        let canvas = document.getElementById(\"myCanvas\");\r\n        canvas.width = window.innerWidth;\r\n        canvas.height = window.innerHeight;\r\n\r\n        let ctx = canvas.getContext(\"2d\");\r\n\r\n        var wrh = image.width / image.height;\r\n        var newWidth = canvas.width;\r\n        var newHeight = newWidth / wrh;\r\n        if (newHeight > canvas.height) {\r\n            newHeight = canvas.height;\r\n            newWidth = newHeight * wrh;\r\n        }\r\n\r\n        var x = 0;\r\n        var y = 0;\r\n\r\n        if (newWidth < canvas.width) {\r\n            x = (canvas.width - newWidth) / 2;\r\n        }\r\n\r\n        if (newHeight < canvas.height) {\r\n            y = (canvas.height - newHeight) / 2;\r\n        }\r\n\r\n        //ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        ctx.drawImage(image, x, y, newWidth, newHeight);\r\n    }\r\n\r\n    render() {\r\n        return (<canvas id=\"myCanvas\"></canvas>);\r\n    }\r\n}\r\n\r\nexport default MyCanvas;","import React from 'react';\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            site: \"\",\r\n            name: \"\",\r\n            password: \"\"\r\n        };\r\n    }\r\n\r\n    setSite = (event) => {\r\n        this.setState({ site: event.target.value });\r\n    }\r\n\r\n    setName = (event) => {\r\n        this.setState({ name: event.target.value });\r\n    }\r\n\r\n    setPassword = (event) => {\r\n        this.setState({ password: event.target.value });\r\n    }\r\n\r\n    validateForm = () => {\r\n        return this.state.email.length > 0 && this.state.password.length > 0;\r\n    }\r\n\r\n    handleSubmit = (event) => {\r\n        //console.log(\"Login handleSubmit\");\r\n        event.preventDefault();\r\n        this.props.updateCredentials(this.state.site, this.state.name, this.state.password);\r\n        this.props.history.push(process.env.PUBLIC_URL + '/viewer'); // <Route path={process.env.PUBLIC_URL + \"/viewer\"} \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"form-horizontal\" onSubmit={this.handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label className=\"control-label col-sm-2\" >Site:</label>\r\n                    <div className=\"col-sm-10\">\r\n                        <input className=\"form-control\" id=\"site\"\r\n                            value={this.state.site} onChange={this.setSite} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"control-label col-sm-2\" >Name:</label>\r\n                    <div className=\"col-sm-10\">\r\n                        <input className=\"form-control\" id=\"name\"\r\n                            value={this.state.name} onChange={this.setName} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"control-label col-sm-2\">Password:</label>\r\n                    <div className=\"col-sm-10\">\r\n                        <input type=\"password\" className=\"form-control\" id=\"pwd\"\r\n                            value={this.state.password} onChange={this.setPassword} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"col-sm-offset-2 col-sm-10\">\r\n                        <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\n\r\nclass NextButton extends React.Component {    \r\n    render() {\r\n        return (\r\n            <button\r\n                id=\"nextButton\"\r\n                className=\"btn btn-primary  btn-lg float-button-next\"\r\n                onClick={this.props.handleOnNext}>\r\n                &gt;\r\n            </button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NextButton;","import React from 'react';\r\n\r\nclass PrevButton extends React.Component {  \r\n    render() {\r\n      return (\r\n        <button\r\n            id=\"prevButton\" \r\n            className=\"btn btn-primary  btn-lg float-button-prev\"\r\n            onClick={this.props.handleOnPrev}>\r\n            &lt;\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n  \r\nexport default PrevButton;","import React from 'react';\r\n\r\nclass AlbumSelect extends React.Component {\r\n    \r\n    render() {\r\n        //console.log(\"AlbumSelect: albums: \" + this.props.albums + \" Active: \" + this.props.selectedAlbum);\r\n        const options = this.props.albums.map((album) =>\r\n            <option key={album} value={album} >{album}</option>,\r\n        );\r\n\r\n        return (\r\n            <select \r\n              id=\"albumSelect\" \r\n              className=\"float-select\" \r\n              value={this.props.selectedAlbum} \r\n              onChange={this.props.handleChange}>\r\n                {options}\r\n            </select>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AlbumSelect;","/* eslint-disable no-useless-constructor */\r\nimport React from 'react';\r\n\r\nclass Slider extends React.Component {\r\n    render() {\r\n        // console.log(`Slider: Max: ${this.props.max} Current :${this.props.current}`);\r\n        return (\r\n            <div id=\"imageSlider\" className=\"slidecontainer\">\r\n                <input\r\n                    className=\"slider\"\r\n                    id=\"myRange\"\r\n                    type=\"range\"\r\n                    min=\"0\"\r\n                    max={this.props.max}\r\n                    value={this.props.current}\r\n                    onChange={this.props.handleChange} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Slider;","import React from 'react';\r\n\r\nclass ToggleButton extends React.Component {    \r\n    render() {\r\n        return (\r\n            <button\r\n                id=\"toggleButton\"\r\n                className=\"btn btn-primary float-button-toggle\"\r\n                onClick={this.props.handleOnToggle}>\r\n                [ - ]\r\n            </button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ToggleButton;","import axios from 'axios';\r\nimport config from \"./config.json\";\r\n\r\nexport default class {\r\n    static async loadSetting(host, user, key) {\r\n        let settingUrl = `${config.httpsProxy}http://${host}/api/user/${user}/setting/key/${key}`;\r\n        console.log(`loadSetting: ${settingUrl}`);\r\n\r\n        let settingValue = \"\";\r\n\r\n        try {\r\n            // Load the list of albums\r\n            let settingResult = await axios({\r\n                method: 'get',\r\n                url: settingUrl,\r\n                responseType: 'text',\r\n                headers: { 'Access-Control-Allow-Origin': '*' }\r\n            })\r\n            //console.log(settingResult);\r\n            settingValue = settingResult.data;\r\n        } catch (error) {\r\n            console.log(`loadSetting caught for ${key}`)\r\n            settingValue = \"\";\r\n        }\r\n\r\n        if (typeof settingValue === undefined || settingValue === \"undefined\") {\r\n            console.log(`Settings::loadSetting query for user: ${user} and key: ${key} is undefined, setting to \"\"`);\r\n            settingValue = \"\";\r\n        }\r\n\r\n        console.log(`Settings: loadSetting result for ${key}: ${settingValue}`);\r\n        return settingValue;\r\n    }\r\n\r\n    // /api/user/:user/setting/key/:key/value/:value\r\n    static async saveSetting (host, user, key, value) {\r\n        let settingUrl = `${config.httpsProxy}http://${host}/api/user/${user}/setting/key/${key}/value/${value}`;\r\n        console.log(`saveSetting: ${settingUrl}`);\r\n        // Fire and don't wait\r\n        try {\r\n            axios({\r\n                method: 'post',\r\n                url: settingUrl,\r\n                responseType: 'json',\r\n                headers: { 'Access-Control-Allow-Origin': '*' }\r\n            })\r\n        } catch (error) {\r\n            console.log(`Viewer::saveSetting failed: ${error}`)\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport axios from 'axios';\r\nimport './App.css';\r\nimport Canvas from './Canvas';\r\nimport NextButton from './NextButton';\r\nimport PrevButton from './PrevButton';\r\nimport AlbumSelect from './AlbumSelect';\r\nimport Slider from \"./Slider\";\r\nimport ToggleButton from './ToggleButton';\r\nimport Settings from \"./Settings\";\r\nimport config from \"./config.json\";\r\n\r\n// First load - ComponenDidMount\r\n//   - Load the list of albums\r\n//       - Update state albumList\r\n//       - Update state activeAlbum\r\n//       - Load imageList\r\n//           - Update local imageList\r\n//           - Update state mageListLength\r\n//           - Update state activeImageIndex\r\n// HandleAlbumChange\r\n//   - Update state activeAlbum\r\n//       - Load imageList\r\n//           - Update local imageList\r\n//           - Update state mageListLength\r\n//           - Update state activeImageIndex\r\n\r\nclass Viewer extends React.Component {\r\n\r\n    // AlbumList []       - state  - Shared with Selec-\r\n    // imageList []       - local  - \r\n    // imageListLength    - state  - Shared with Slider\r\n    // activeAlbum        - state  - Shared with Select\r\n    // activeImageIndex   - state  - Shared with slider\r\n    // activeUrl          - state  - Shared with Canvas\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            baseUrl: `${config.httpsProxy}http://${this.props.site}/api/user/${this.props.username}`,\r\n            password: this.props.password,\r\n            activeUrl: \"\",\r\n            albumList: [\"foo\"],\r\n            activeAlbum: \"\",\r\n            activeImageIndex: 0,\r\n            imageListLength: 0,\r\n            imageType: \"\",\r\n            imagePassword: this.props.password\r\n        };\r\n\r\n        //console.log(`Viewer::Viewer - username=${this.props.username} password=${this.state.password}`);\r\n        if (this.props.username === \"\") {\r\n            console.log(`No username.  Pushing to login`);\r\n            this.props.history.push(process.env.PUBLIC_URL + \"/\");\r\n        }\r\n        this.imageList = [];\r\n        this.fullScreen = false;\r\n    }\r\n\r\n    handleAlbumChange = async (event) => {\r\n        let newActiveAlbum = event.target.value;\r\n        console.log(`New Album selected:`, newActiveAlbum);\r\n\r\n        Settings.saveSetting(this.props.site, this.props.username, \"lastAlbum\", newActiveAlbum);\r\n\r\n        this.imageList = await this.loadImageList(newActiveAlbum);\r\n\r\n        // this.setState({\r\n        //     activeAlbum: newActiveAlbum,\r\n        //     imageListLength: this.imageList.length,\r\n        //     activeImageIndex: 0\r\n        // });\r\n\r\n        this.showNewImage(newActiveAlbum, 0);\r\n    };\r\n\r\n    handleSliderChange = (event) => {\r\n        //console.log(`Viewer::handlSliderChange - New: ${event.target.value}, Max: ${this.state.imageListLength}`);\r\n        this.showNewImage(this.state.activeAlbum, event.target.value);\r\n    }\r\n\r\n    handleResize = () => {\r\n        //console.log(\"Viewer::handleResize\");\r\n        this.showNewImage(this.state.activeAlbum, this.state.activeImageIndex);\r\n    }\r\n\r\n    showNewImage = (album, index) => {\r\n        //console.log(`Viewer::showNewImage: user=${this.props.username} album=${album} index=${index} image=${this.imageList[index]}`)\r\n        Settings.saveSetting(this.props.site, this.props.username, \"lastIndex\", index);\r\n        \r\n        var imageUrl = `${this.state.baseUrl}/base64Image/albumName/${album}/imageName/${this.imageList[index]}`;\r\n\r\n        let newType = \"\";\r\n        let newImagePassword = this.state.password;\r\n        try {\r\n        if (this.imageList[index].endsWith(\"daj\")) {\r\n            newType = \"jpeg\";\r\n        } else if (this.imageList[index].endsWith(\"dag\")) {\r\n            newType = \"gif\";\r\n        } else if (this.imageList[index].endsWith(\"dap\")) {\r\n            newType = \"png\";\r\n        } else if (this.imageList[index].endsWith(\"jpeg\")) {\r\n            newType = \"jpeg\";\r\n            newImagePassword = \"\";\r\n        } else if (this.imageList[index].endsWith(\"jpg\")) {\r\n            newType = \"jpeg\";\r\n            newImagePassword = \"\";\r\n        } else if (this.imageList[index].endsWith(\"png\")) {\r\n            newType = \"png\";\r\n            newImagePassword = \"\";\r\n        } else if (this.imageList[index].endsWith(\"gif\")) {\r\n            newType = \"gif\";\r\n            newImagePassword = \"\";\r\n        }\r\n\r\n        this.setState({ \r\n            activeUrl: imageUrl, \r\n            imageType: newType, \r\n            activeAlbum: album,\r\n            imageListLength: this.imageList.length,\r\n            activeImageIndex: index,\r\n            imagePassword: newImagePassword });\r\n        } catch (e) {\r\n            console.log(`ShowNewImage failed, skipping ${e}`);\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.timeout = setTimeout(() => {\r\n            this.onHide();\r\n        }, 3000);\r\n\r\n        // Load the list of albums\r\n        try {\r\n            let newAlbumList = await this.loadAlbumList();\r\n\r\n            let newActiveAlbum = await Settings.loadSetting(this.props.site, this.props.username, \"lastAlbum\");\r\n            if (newActiveAlbum === \"\") {\r\n                newActiveAlbum = newAlbumList[0];\r\n                Settings.saveSetting(this.props.site, this.props.username, \"lastAlbum\", newActiveAlbum);\r\n            }\r\n            this.imageList = await this.loadImageList(newActiveAlbum);\r\n\r\n            let newActiveImageIndex = await Settings.loadSetting(this.props.site, this.props.username, \"lastIndex\");\r\n            if (newActiveImageIndex === \"\") {\r\n                console.log(`Viewer::componentDidMount: newActiveImageIndex blank, setting to 0`)\r\n                newActiveImageIndex = 0;\r\n            }\r\n\r\n            this.showNewImage(newActiveAlbum, newActiveImageIndex);\r\n\r\n            let newState = {\r\n                albumList: newAlbumList,\r\n            };\r\n\r\n            this.setState(newState);\r\n\r\n        } catch (error) {\r\n            // handle error\r\n            console.log(`Viewer::componentDidMount Catch = ${error}.  Pushing to login`);\r\n            if (this.timeout !== undefined) {\r\n                clearTimeout(this.timeout);\r\n            }\r\n            this.props.history.push(process.env.PUBLIC_URL + \"/\");\r\n        };\r\n\r\n        document.addEventListener('keydown', this.onKey);\r\n        document.addEventListener('wheel', this.onWheel);\r\n        document.addEventListener('mousemove', this.onShow);\r\n        document.addEventListener('mousedown', this.onClick);\r\n        document.addEventListener('contextmenu', this.onRightClick);\r\n        window.addEventListener('resize', this.handleResize)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.onKey);\r\n        document.removeEventListener('wheel', this.onWheel);\r\n        document.removeEventListener('mousemove', this.onShow);\r\n        document.removeEventListener('mousedown', this.onClick);\r\n        document.removeEventListener('contextmenu', this.onRightClick);\r\n        document.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    loadAlbumList = async () => {\r\n        let albumListUrl = this.state.baseUrl + \"/albums\";\r\n        //console.log(\"Viewer loadAlbumList albumUrl: \" + albumListUrl);\r\n\r\n        // Load the list of albums\r\n        let albumResult = await axios({\r\n            method: 'get',\r\n            url: albumListUrl,\r\n            responseType: 'json',\r\n            headers: { 'Access-Control-Allow-Origin': '*' }\r\n        })\r\n\r\n        return albumResult.data;\r\n    }\r\n\r\n    loadImageList = async (albumName) => {\r\n        var albumUrl = this.state.baseUrl + \"/album/albumName/\" + albumName;\r\n        //console.log(\"Viewer loadImageList albumUrl: \" + albumUrl);\r\n\r\n        let list = [];\r\n        try {\r\n            let listResult = await axios({\r\n                method: 'get',\r\n                url: albumUrl,\r\n                responseType: 'json',\r\n                headers: { 'Access-Control-Allow-Origin': '*' }\r\n            });\r\n            list = listResult.data;\r\n        } catch (error) {\r\n            console.log(`Viewer::loadImageList failed: ${error}`)\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    onNext = () => {\r\n        console.log(\"App: onNext, index: \" + this.state.activeImageIndex);\r\n\r\n        if (this.state.activeImageIndex < this.state.imageListLength - 1) {\r\n            let newActiveImageIndex = this.state.activeImageIndex;\r\n            // Adding 1 to activeImageIndex on the line above sometimes produced \"01\"\r\n            newActiveImageIndex++;\r\n\r\n            this.showNewImage(this.state.activeAlbum, newActiveImageIndex);\r\n        }\r\n    }\r\n\r\n    onPrev = () => {\r\n        console.log(\"App: onPrev, index: \" + this.state.activeImageIndex);\r\n\r\n        if (this.state.activeImageIndex > 0) {\r\n            let newActiveImageIndex = this.state.activeImageIndex - 1;\r\n            newActiveImageIndex--; \r\n\r\n            this.showNewImage(this.state.activeAlbum, newActiveImageIndex);\r\n        }\r\n    }\r\n\r\n    onKey = (event) => {\r\n        var x = event.which || event.keyCode;\r\n\r\n        // space: 32       Enter: 13     Esc:   27\r\n        // Up:    38       Down:  40\r\n        // Right: 39       Left:  37\r\n\r\n        if (x === 32 || x === 39) {\r\n            this.onNext();\r\n        } else if (x === 37) {\r\n            this.onPrev();\r\n        } else if (x === 27) {\r\n            this.closeFullscreen();\r\n        }\r\n    }\r\n\r\n    onClick = (event) => {\r\n        console.log(\"onClick.\");\r\n        if (this.isInFullScreen()) {\r\n            console.log(\"Viewer::onClick\", event.button);\r\n            if (event.button === 0) {\r\n                this.onPrev();\r\n            } else if (event.button === 1) {\r\n                this.props.history.push(process.env.PUBLIC_URL + \"/\");\r\n            } else if (event.button === 2) {\r\n                this.onNext();\r\n            }\r\n        } else {\r\n            console.log(\"Skipping mouse click when not in full screen\")\r\n        }\r\n    }\r\n\r\n    onRightClick = (event) => {\r\n        // Disable the regular context menu\r\n        event.preventDefault(); \r\n    }\r\n\r\n    onWheel = (event) => {\r\n        console.log(\"Viewer::onWheel: \", event);\r\n\r\n        if (event.deltaY < 0) {\r\n            this.onPrev();\r\n        } else if (event.deltaY > 0) {\r\n            this.onNext();\r\n        } else {\r\n            console.log(\"Viewer::onWheel - not an up/down\");\r\n        }\r\n    }\r\n\r\n    onShow = () => {\r\n        try {\r\n            if (!this.isInFullScreen()) {\r\n                document.getElementById(\"prevButton\").classList.remove(\"m-fadeOut\");\r\n                document.getElementById(\"nextButton\").classList.remove(\"m-fadeOut\");\r\n                document.getElementById(\"albumSelect\").classList.remove(\"m-fadeOut\");\r\n                document.getElementById(\"imageSlider\").classList.remove(\"m-fadeOut\");\r\n                document.getElementById(\"toggleButton\").classList.remove(\"m-fadeOut\");\r\n                document.getElementById(\"prevButton\").classList.add(\"m-fadeIn\");\r\n                document.getElementById(\"nextButton\").classList.add(\"m-fadeIn\");\r\n                document.getElementById(\"albumSelect\").classList.add(\"m-fadeIn\");\r\n                document.getElementById(\"imageSlider\").classList.add(\"m-fadeIn\");\r\n                document.getElementById(\"toggleButton\").classList.add(\"m-fadeIn\");\r\n            } else {\r\n                // just the slider\r\n                document.getElementById(\"imageSlider\").classList.remove(\"m-fadeOut\");\r\n                document.getElementById(\"imageSlider\").classList.add(\"m-fadeIn\");\r\n            }\r\n\r\n            // Here we use a class variable (this.timeout) because we don't want to trigger \r\n            // a re-render that would happen if we changed a state variable.\r\n            if (this.timeout !== undefined) {\r\n                clearTimeout(this.timeout);\r\n            }\r\n\r\n            this.timeout = setTimeout(() => {\r\n                this.onHide();\r\n            }, 2000);\r\n        } catch (e) { }\r\n    }\r\n\r\n    onHide = () => {\r\n        try {\r\n            document.getElementById(\"prevButton\").classList.remove(\"m-fadeIn\");\r\n            document.getElementById(\"nextButton\").classList.remove(\"m-fadeIn\");\r\n            document.getElementById(\"albumSelect\").classList.remove(\"m-fadeIn\");\r\n            document.getElementById(\"imageSlider\").classList.remove(\"m-fadeIn\");\r\n            document.getElementById(\"toggleButton\").classList.remove(\"m-fadeIn\");\r\n            document.getElementById(\"prevButton\").classList.add(\"m-fadeOut\");\r\n            document.getElementById(\"nextButton\").classList.add(\"m-fadeOut\");\r\n            document.getElementById(\"albumSelect\").classList.add(\"m-fadeOut\");\r\n            document.getElementById(\"imageSlider\").classList.add(\"m-fadeOut\");\r\n            document.getElementById(\"toggleButton\").classList.add(\"m-fadeOut\");\r\n        } catch (e) { }\r\n    }\r\n\r\n    handleFullscreenToggle = () => {\r\n        if (this.isInFullScreen()) {\r\n            this.closeFullscreen();\r\n        } else {\r\n            this.openFullscreen();\r\n        }\r\n    }\r\n\r\n    isInFullScreen = () => {\r\n        return (document.fullscreenElement && document.fullscreenElement !== null) ||\r\n            (document.webkitFullscreenElement && document.webkitFullscreenElement !== null) ||\r\n            (document.mozFullScreenElement && document.mozFullScreenElement !== null) ||\r\n            (document.msFullscreenElement && document.msFullscreenElement !== null)\r\n    }\r\n\r\n    openFullscreen = () => {\r\n        //console.log(\"openFullScreen\");\r\n        var docElm = document.documentElement;\r\n\r\n        if (docElm.requestFullscreen) {\r\n            docElm.requestFullscreen();\r\n        } else if (docElm.mozRequestFullScreen) {\r\n            docElm.mozRequestFullScreen();\r\n        } else if (docElm.webkitRequestFullScreen) {\r\n            docElm.webkitRequestFullScreen();\r\n        } else if (docElm.msRequestFullscreen) {\r\n            docElm.msRequestFullscreen();\r\n        }\r\n    }\r\n\r\n    /* Close fullscreen */\r\n    closeFullscreen = () => {\r\n        //console.log(\"closeFullScreen\");\r\n        if (document.exitFullscreen) {\r\n            document.exitFullscreen();\r\n        } else if (document.webkitExitFullscreen) {\r\n            document.webkitExitFullscreen();\r\n        } else if (document.mozCancelFullScreen) {\r\n            document.mozCancelFullScreen();\r\n        } else if (document.msExitFullscreen) {\r\n            document.msExitFullscreen();\r\n        }\r\n    }\r\n\r\n    // The tabIndex=\"0\" is needed to get onKeyDown to work\r\n    //onKeyDown={this.onKey}\r\n    //            onMouseMove={this.onShow}\r\n    //            tabIndex=\"0\"\r\n    render() {\r\n\r\n        return (\r\n            <div id=\"myViewer\" className=\"Viewer\">\r\n                <AlbumSelect\r\n                    selectedAlbum={this.state.activeAlbum}\r\n                    handleChange={this.handleAlbumChange}\r\n                    albums={this.state.albumList}\r\n                />\r\n\r\n                <Canvas url={this.state.activeUrl} password={this.state.imagePassword} type={this.state.imageType} />\r\n\r\n                <NextButton handleOnNext={this.onNext} />\r\n\r\n                <PrevButton handleOnPrev={this.onPrev} />\r\n\r\n                <Slider max={this.state.imageListLength - 1} current={this.state.activeImageIndex} handleChange={this.handleSliderChange} />\r\n\r\n                <ToggleButton handleOnToggle={this.handleFullscreenToggle} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Viewer;","import React from \"react\";\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route\r\n} from \"react-router-dom\";\r\nimport LoginScreen from \"./LoginScreen\"\r\nimport ViewerScreen from \"./ViewerScreen\"\r\n\r\n// class Viewer extends React.Component {\r\nclass App extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            site: \"\",\r\n            username: \"\",\r\n            password: \"\"\r\n        };\r\n    }\r\n\r\n    updateCredentials = (site, username, password) => {\r\n        console.log(`App::updateCredentials: site = ${site}, username = ${username}, password = ${password}`);\r\n        this.setState({site: site, username: username, password: password});\r\n    }\r\n\r\n    // The real workhorse of React Router is the History library. Under the hood, it’s what’s keeping track \r\n    // of session history for React Router. When a component is rendered by React Router, \r\n    // that component is passed three different props: location, match, and history. This history prop comes \r\n    // from the History library and has a ton of fancy properties on it related to routing. In this case, \r\n    // the one we’re interested in is history.push. What it does is it pushes a new entry into the history stack \r\n    // - aka redirecting the user to another route.\r\n    // The {...props} below pushs all the props down to the subordinate screens including 'history' OR NOT\r\n    render() {\r\n        console.log(`App::render - PUBLIC_URL=${process.env.PUBLIC_URL}`)\r\n        return(\r\n            <Router>\r\n                <div>\r\n                    {/* A <Switch> looks through its children <Route>s and renders the first one that matches the current URL. */}\r\n                    <Switch>\r\n                        <Route path={process.env.PUBLIC_URL + \"/viewer\"} \r\n                            render={(props) =>\r\n                                <ViewerScreen {...props}\r\n                                site={this.state.site}\r\n                                username={this.state.username} \r\n                                password={this.state.password} \r\n                                component={ViewerScreen} />\r\n                            }\r\n                        />\r\n                        <Route path={process.env.PUBLIC_URL + '/'}\r\n                        \r\n                            render={(props) => \r\n                                <LoginScreen {...props} \r\n                                updateCredentials={this.updateCredentials} />\r\n                            }                         \r\n                        />\r\n                    </Switch>\r\n                </div>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render( < App / > , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister(); "],"sourceRoot":""}